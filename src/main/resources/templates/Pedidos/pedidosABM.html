<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AyC Pedidos</title>
</head>

<body>
    <div class="main">
        
        <a href="/inicio">INICIO</a> <br>
        <a href="/pedidosABM">PEDIDOS ABM</a> <br>
        <a href="/usuariosABM">USUARIOS ABM</a> <br>
        <a href="/logout">SALIR</a>
        <hr>

        <h1>PEDIDOS ABM</h1>
        <hr>
        <h3>CARGAR NUEVO PEDIDO</h3>
        <h5 th:if="${error !=null}" th:text="${error}" style="color: red;"></h5>
        <!-- FORMULARIO -->
        <div class="form-container">
            <form id="nuevo-pedido" action="/registrarPedido" method="POST" enctype="multipart/form-data">
                <h2 class="agenda-section">Nombre</h2>
                <div class="client-name">
                    <label for="client-name">Cliente</label>
                    <input type="text" id="client-name" name="nombreCliente" placeholder="Ingrese el nombre del cliente"
                        required>
                </div>
                <h2 class="agenda-section">Interior</h2>
                <div class="select">
                    <label for="codigoInterior">Codigo Interior</label>
                    <input list="lista" name="codigoInterior" id="codigoInterior" required>
                    <datalist id="lista" style="display: none;">
                        <div th:each="codigo: ${codigosInterior}">
                            <div>
                                <option th:text="${codigo}">
                                </option>
                            </div>
                        </div>
                    </datalist>
                </div>
                <!-- TAPA -->
                <h2 class="agenda-seccion">Tapa</h2>
                <div class="select">
                    <label for="tapa-fondo">Codigo de Fondo</label>
                    <input type="text" id="tapa-fondo" name="codigoFondoTapa" placeholder="Ingresar codigo de fondo"
                        required>
                </div>
                <div class="tapa-personal">
                    <label for="tapa__personal">Tapa Personalizada</label>
                    <!--Fondo Custom Tapa-->
                    <input type="file" id="tapa-personal" name="customFondoTapa">
                </div>
                <div class="select">
                    <label for="tapa-frase">Codigo de Frase</label>
                    <input type="text" id="tapa-frase" name="codigoFraseTapa" placeholder="Ingresar codigo de frase"
                        required>
                </div>
                <div class="tapa-frase__personal">
                    <label for="tapa-frase__personal">Frase Personalizada</label>
                    <input type="text" id="tapa-frase__personal" name="customFraseTapa" placeholder="agregar frase">
                </div>
                <!-- TAPA -->
                <h2 class="agenda-seccion">Contratapa</h2>
                <div class="select">
                    <label for="contratapa-fondo">Codigo de Fondo</label>
                    <input type="text" id="contratapa-fondo" name="codigoFondoContratapa"
                        placeholder="Ingresar codigo de fondo" required>
                </div>
                <div class="contratapa__personal">
                    <label for="contratapa__personal">Contratapa Personalizada</label>
                    <!--Fondo Custom Contratapa-->
                    <input type="file" id="contratapa__personal" name="customFondoContratapa">
                </div>
                <div class="select">
                    <label for="contratapa-frase">Codigo de Frase</label>
                    <input type="text" id="contratapa-frase" name="codigoFraseContratapa"
                        placeholder="Ingresar codigo de frase" required>
                </div>
                <div class="contratapa-frase__personal">
                    <label for="contratapa-frase__personal">Frase Personalizada</label>
                    <input type="text" id="contratapa-frase__personal" name="customFraseContratapa"
                        placeholder="agregar frase">
                </div>
                <div class="quatity">
                    <h2 class="agenda-seccion">Cantidad</h2>
                    <label for="cantidad">Cantidad de Agendas</label>
                    <input type="number" id="cantidad" name="cantidad" required>
                </div>
                <div class="textarea">
                    <h2 class="agenda-seccion">Descripcion</h2>
                    <textarea class="descripcion" name="descripcion"
                        placeholder="Agregar una descripcion aqui..."></textarea>
                </div>
                <h5>Asignar Vendedor</h5>
                <select name="vendedorId">
                    <option th:each="usuario : ${usuarios}" th:value="${usuario.id}" th:if="${usuario.rol == T(com.okta.aycPedidos.enums.Rol).VENDEDOR}">
                        <div>
                            <span>Nombre:</span>
                            <span th:text="${usuario.username}"></span>
                        </div>
                    </option>
                </select>
                <h5>Asignar Dise√±ador</h5>
                <select name="disenadorId">
                    <option th:each="usuario : ${usuarios}" th:value="${usuario.id}" th:if="${usuario.rol == T(com.okta.aycPedidos.enums.Rol).DISENADOR}">
                        <div>
                            <span>Nombre:</span>
                            <span th:text="${usuario.username}"></span>
                        </div>
                    </option>
                </select>
                <br>
                <div class="submit-btn">
                    <button type="submit" id="submit">Enviar Pedido</button>
                </div>
            </form>
        </div>
        <hr>
        <h3>Listar Pedidos</h3>
        <div th:each="pedido : ${pedidos}">
            <hr>
            <p><a th:href="@{/pedidoInfo/{pedidoId}(pedidoId=${pedido.id})}">Id: <span
                        th:text="${pedido.id}"></span></a><br></p>
            <p>Nombre Cliente: <span th:text="${pedido.nombreCliente}"></span><br></p>
            <p>Fecha: <span th:text="${pedido.fechaAlta}"></span><br></p>
            <form action="/hardDeletePedido" method="POST">
                <input type="hidden" name="pedidoId" th:value="${pedido.id}">
                <button type="submit">Eliminar</button>
            </form>
            <hr>
        </div>
    </div>
</body>

</html>